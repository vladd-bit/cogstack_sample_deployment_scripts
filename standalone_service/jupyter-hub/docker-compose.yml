version: "3.5"
services:

 jupyter-hub:
    image: jupyter/datascience-notebook
    #build: ../services/jupyter-hub/
    container_name: cogstack-jupyter-hub-datascience-notebook
    restart: always
    environment:
      - JUPYTER_ENABLE_LAB=yes
    # old irrelevant option, the password config is set in 
    # - JUPYTERHUB_PASSWORD='sha1:90559713cfc9:c4d986a5a63c083626ebc1a74cb874d9203c4152' # 'admin'
    volumes:
      - "../../cogstack-pipeline/jupyter-hub/notebooks:/home/jovyan/notebooks"
      - "../../cogstack-pipeline/jupyter-hub/config/jupyter_notebook_config.py:/home/jovyan/.jupyter/jupyter_notebook_config.py"
      # INFO: uncomment below to map security certificates if needed
      #- "../security/jupyter.pem:/etc/ssl/notebook/jupyter.pem:ro"
      #- "../security/jupyter.key:/etc/ssl/notebook/jupyter.key:ro"
      #- "../security/root-ca.pem:/etc/ssl/notebook/root-ca.pem:ro"
    # command: "start-notebook.sh  --NotebookApp.password=${JUPYTERHUB_PASSWORD}"
      # INFO: uncomment below to use SSL keys (as a part of start-up cmd) 
      #           --keyfile=/etc/ssl/notebook/jupyter.key \
      #           --certfile=/etc/ssl/notebook/jupyter.pem \
    expose: 
    - "8888"
    network_mode: host
     